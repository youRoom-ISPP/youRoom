{% extends 'base/base.html' %}
{% load l10n %}

{% block titulo_pagina %}Timeline{% endblock %}
{% block titulo %}Timeline{% endblock %}

{% block mobile-sticky-menu %}
<ul class="nav justify-content-around opciones-timeline-mobile mb-3 sticky-top">
    <div class="col-6 timeline-nav">
        <li class="nav-item">
            <a class="nav-link text-white text-center" href="{% url 'timeline' %}"><i class="bi bi-lightning-fill mr-2"></i>Destacados</a>
        </li>
    </div>
    <div class="col-6 timeline-nav">
        <li class="nav-item dropdown ">
            <a class="nav-link text-white dropdown-toggle text-center" data-toggle="dropdown" href="{% url 'timeline' %}" role="button"
                aria-haspopup="true" aria-expanded="false"><i class="bi bi-card-list mr-2"></i>Categorías</a>
            <div class="dropdown-menu">
                {% for categoria in categorias %}
                <a class="dropdown-item" href="{% url 'timeline_categoria' categoria=categoria.1 %}">{{ categoria.1 }}</a>
                {% endfor %}
            </div>
        </li>
    </div>
</ul>
{% endblock %}

{% block contenido %}
<div class="row">
    <div class="col-12 timeline">
        {% for p in publicaciones %}
        <div class="">
            <div class="card mb-3">
                <div class="card-header bg-white">
                    <strong class="timeline-user">{{p.usuario.user.username}}</strong>
                </div>
                <div class="container-visor-timeline">
                    <img src="{{p.imagen.url}}" class="card-img-bottom">
                    {% for e in p.etiqueta_set.all %}
                    {% localize off %}
                    <a target="_blank" href="{{e.enlace}}"><div id="{{e.nombre}}" class="etiqueta" style="left: {{e.coord_x}}%; top: {{e.coord_y}}%;"></div></a>
                    {% endlocalize %}
                    {% endfor %}
                </div>
                <div class="card-body cuerpo-tarjeta">
                    <div class="row pl-1 bg-white">
                        <fieldset class="rating">
                            <input type="radio" id="star5-r{{p.id}}" name="rating-r{{p.id}}" value="5" />
                            <label class="full" for="star5-r{{p.id}}" title="5 estrellas"></label>
                            <input type="radio" id="star4-r{{p.id}}" name="rating-r{{p.id}}" value="4" />
                            <label class="full" for="star4-r{{p.id}}" title="4 estrellas"></label>
                            <input type="radio" id="star3-r{{p.id}}" name="rating-r{{p.id}}" value="3" />
                            <label class="full" for="star3-r{{p.id}}" title="3 estrellas"></label>
                            <input type="radio" id="star2-r{{p.id}}" name="rating-r{{p.id}}" value="2" />
                            <label class="full" for="star2-r{{p.id}}" title="2 estrellas"></label>
                            <input type="radio" id="star1-r{{p.id}}" name="rating-r{{p.id}}" value="1" />
                            <label class="full" for="star1-r{{p.id}}" title="1 estrella"></label>
                        </fieldset>
                    </div>
                    <div class="row px-1">
                        <p>{{p.descripcion}}</p>
                    </div>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
</div>
{% endblock %}

{% block opciones-timeline %}
<div class="col-12">
    <div class="row">
        <div class="col-12">
            <div class="row timeline-nav-pc">
                <a class="text-white" href="{% url 'timeline' %}"><i class="bi bi-lightning-fill"></i><span class="ml-1 ml-lg-4">Destacados</span></a>
            </div>
            <div class="row mt-1 timeline-nav-pc">
                <div class="nav-item dropdown">
                    <a class="dropdown-toggle text-white text-center" data-toggle="dropdown" href="{% url 'timeline' %}" role="button"
                        aria-haspopup="true" aria-expanded="false"><i class="bi bi-card-list"></i><span class="ml-1 ml-lg-4">Categorías</span></a>
                    <div class="dropdown-menu">
                        {% for categoria in categorias %}
                        <a class="dropdown-item text-center" href="{% url 'timeline_categoria' categoria=categoria.1 %}">{{ categoria.1}}</a>
                        {% endfor %}
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
